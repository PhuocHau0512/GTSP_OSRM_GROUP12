<!DOCTYPE html>
<html lang="vi"> <head>
    <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>T·ªëi ∆∞u L·ªô tr√¨nh GTSP (3 L·ªõp)</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
          rel="stylesheet" 
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
          crossorigin="anonymous">
    
    <style>
        /* --- CSS --- */
        
        /* 1. Thi·∫øt l·∫≠p font ch·ªØ hi·ªán ƒë·∫°i & l√†m m∆∞·ª£t ch·ªØ */
        body, html {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
            /* Thay Times New Roman b·∫±ng m·ªôt font sans-serif s·∫°ch s·∫Ω, hi·ªán ƒë·∫°i */
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: #f4f7f6; /* Th√™m m√†u n·ªÅn nh·∫π cho body */
        }

        /* 2. Header v·ªõi hi·ªáu ·ª©ng Gradient chuy·ªÉn ƒë·ªông */
        header {
            flex-shrink: 0;
            padding: 1.25rem 1rem;
            color: white;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            /* D·∫£i m√†u gradient thay cho m√†u ƒëen/xanh l√° c√¢y */
            background: linear-gradient(-45deg, #16a085, #27ae60, #2980b9, #1abc9c);
            background-size: 400% 400%;
            animation: gradientAnimation 15s ease infinite;
            z-index: 20; /* ƒê·∫£m b·∫£o header n·ªïi l√™n tr√™n */
        }

        header h2 {
            margin: 0;
            font-size: 1.6rem; /* ƒêi·ªÅu ch·ªânh font cho ti√™u ƒë·ªÅ d√†i */
            font-weight: 600;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }

        /* Animation cho gradient c·ªßa header */
        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* 3. B·ªë c·ª•c ch√≠nh */
        main {
            display: flex;
            flex-grow: 1;
            overflow: hidden;
        }

        /* 4. Thanh ƒëi·ªÅu khi·ªÉn (Controls) b√™n tr√°i */
        .controls {
            flex-basis: 380px;
            flex-shrink: 0;
            padding: 20px;
            overflow-y: auto;
            /* ƒê·ªïi n·ªÅn th√†nh m√†u tr·∫Øng ƒë·ªÉ s·∫°ch s·∫Ω h∆°n */
            background: #ffffff; 
            /* B·ªè border, thay b·∫±ng shadow ƒë·ªÉ t·∫°o ƒë·ªô s√¢u */
            box-shadow: 3px 0 15px rgba(0, 0, 0, 0.07);
            z-index: 10; /* N·∫±m tr√™n b·∫£n ƒë·ªì */
            transition: all 0.3s ease; /* Th√™m hi·ªáu ·ª©ng chuy·ªÉn ƒë·ªông */
        }

        /* 5. N√¢ng c·∫•p Form (Input, Select) */
        .form-control, .form-select {
            transition: all 0.3s ease;
            border-radius: 0.375rem; /* Bootstrap 5 default */
        }
        
        /* Hi·ªáu ·ª©ng "Glow" (ph√°t s√°ng) khi focus v√†o input/select */
        .form-control:focus, .form-select:focus {
            border-color: #1abc9c; /* D√πng m√†u ch·ªß ƒë·∫°o */
            box-shadow: 0 0 0 0.25rem rgba(26, 188, 156, 0.25);
        }

        /* 6. N√¢ng c·∫•p N√∫t (Button) ch√≠nh */
        .btn-primary {
            /* D√πng gradient cho n√∫t th√™m sinh ƒë·ªông */
            background: linear-gradient(45deg, #1abc9c, #27ae60);
            border: none;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-weight: 600;
        }

        /* Hi·ªáu ·ª©ng khi r√™ chu·ªôt v√†o n√∫t */
        .btn-primary:hover {
            opacity: 0.9;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px); /* N√∫t "nh·∫•c" l√™n */
        }

        /* 7. Khu v·ª±c b·∫£n ƒë·ªì */
        #map {
            flex-grow: 1;
            height: 100%;
        }

        /* 8. L·ªõp ph·ªß (Overlay) khi t·∫£i */
        .loading-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            /* D√πng n·ªÅn ƒëen m·ªù thay v√¨ tr·∫Øng */
            background: rgba(0, 0, 0, 0.6); 
            color: white;
            display: none; 
            align-items: center;
            justify-content: center;
            z-index: 10000;
            font-size: 1.5rem;
            /* Hi·ªáu ·ª©ng "K√≠nh m·ªù" (Frosted Glass) r·∫•t hi·ªán ƒë·∫°i */
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        /* 9. Khung ch·ª©a danh s√°ch c·ª•m (Cluster List) */
        #cluster-list {
            max-height: 280px;
            overflow-y: auto;
            border: 1px solid #e0e0e0; /* Border m·ªÅm m·∫°i h∆°n */
            padding: 10px;
            border-radius: 8px; /* Bo g√≥c nhi·ªÅu h∆°n */
            background: #f8f9fa; /* N·ªÅn x√°m nh·∫°t ƒë·ªÉ ph√¢n bi·ªát */
        }

        /* Th√™m hi·ªáu ·ª©ng cho c√°c m·ª•c trong danh s√°ch (gi·∫£ s·ª≠ l√† .form-check) */
        #cluster-list .form-check {
            padding: 8px 12px;
            border-radius: 5px;
            transition: background-color 0.2s ease;
            cursor: pointer;
        }
        #cluster-list .form-check:hover {
            background-color: #e9ecef; /* Hi·ªáu ·ª©ng hover */
        }

        /* 10. CSS cho h∆∞·ªõng d·∫´n (steps) */
        .step-instruction {
            font-size: 0.9rem;
            padding: 4px 0;
        }

        /* 11. (T√πy ch·ªçn) T√πy ch·ªânh thanh cu·ªôn cho ƒë·∫πp h∆°n */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #aaa;
        }
    </style>
</head>
<body>
    <header class="bg-black text-white p text-center shadow-sm">
        <h2>CH∆Ø∆†NG TR√åNH T√åM L·ªò TR√åNH T·ªêI ∆ØU ƒê·ªÇ XE ƒê∆ØA KH√ÅCH THAM QUAN ƒê·∫æN C√ÅC DANH TH·∫ÆNG L·ªäCH S·ª¨ ·ªû TH√ÄNH PH·ªê HCM B·∫∞NG THU·∫¨T TO√ÅN GTS K·∫æT H·ª¢P OSRM</h2>
    </header>

    <main>
        <div class="controls">
            <form id="solve-form">
                <div class="mb-3">
                    <label class="form-label fw-bold">1. Ti√™u ch√≠ t·ªëi ∆∞u:</label>
                    <select class="form-select" id="optimize-for">
                        <option value="distance" selected>Qu√£ng ƒë∆∞·ªùng (km)</option>
                        <option value="time">Th·ªùi gian (ph√∫t)</option>
                    </select>
                </div>
                
                <div class="mb-3">
                    <label for="start-address" class="form-label fw-bold">2. ƒêi·ªÉm xu·∫•t ph√°t:</label>
                    <input type="text" class="form-control" id="start-address" value="S√¢n bay T√¢n S∆°n Nh·∫•t" required>
                </div>
                
                <div class="mb-3">
                    <label for="end-address" class="form-label fw-bold">3. ƒêi·ªÉm k·∫øt th√∫c:</label>
                    <input type="text" class="form-control" id="end-address" value="Ch·ª£ B·∫øn Th√†nh" required>
                </div>
                
                <hr>
                
                <div class="mb-3">
                    <label class="form-label fw-bold">4. Ch·ªçn c√°c c·ª•m ƒëi·ªÉm mu·ªën gh√© thƒÉm:</label>
                    <div id="cluster-list" class="form-check">
                        <div class="d-flex justify-content-center">
                            <div class="spinner-border spinner-border-sm" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <span class="ms-2">ƒêang t·∫£i danh s√°ch c·ª•m...</span>
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary w-100 btn-lg mt-3">
                    üéØ T√¨m L·ªô tr√¨nh
                </button>
            </form>
            
            <hr>
            
            <div id="results-panel">
                <h5 class="fw-bold">K·∫øt qu·∫£ L·ªô tr√¨nh</h5>
                <div id="results-summary" class="mt-3">
                    <p class="text-muted">Ch∆∞a c√≥ k·∫øt qu·∫£. Vui l√≤ng nh·∫≠p th√¥ng tin v√† b·∫•m "T√¨m L·ªô tr√¨nh".</p>
                </div>
            </div>
        </div>

        <div id="map"></div>
    </main>

    <div class="loading-overlay" id="loading">
        <div class="spinner-border text-light" style="width: 3rem; height: 3rem;" role="status"></div>
        <span class="ms-3 fs-4">ƒêang t√≠nh to√°n, vui l√≤ng ch·ªù...</span>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" 
            crossorigin="anonymous"></script>
    
    <script src="/static/app.js"></script>
</body>
</html>